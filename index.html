<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Interactive Web Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #111;
      color: #f5f5f5;
      display: flex;
      min-height: 100vh;
      justify-content: center;
      align-items: center;
    }

    .app-container {
      width: 100%;
      max-width: 900px;
      padding: 20px;
      box-sizing: border-box;
    }

    .step { display: none; }
    .step.active { display: block; }

    .video-wrapper {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
      overflow: hidden;
      border-radius: 12px;
      border: 1px solid #333;
    }

    .video-wrapper iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .btn {
      display: inline-block;
      margin-top: 16px;
      padding: 10px 20px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #f5f5f5;
      color: #111;
      font-size: 14px;
      font-weight: 600;
    }

    .btn[disabled] {
      opacity: 0.4;
      cursor: not-allowed;
    }

    .quiz-options { margin: 16px 0; }
    .quiz-option { margin: 6px 0; }

    .message {
      margin-top: 8px;
      min-height: 20px;
      font-size: 14px;
    }

    .message.correct { color: #66ff99; }
    .message.wrong { color: #ff6666; }

    .image-hotspot-container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 16px;
    }

    .image-wrapper {
      position: relative;
      flex: 1 1 300px;
      max-width: 500px;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid #333;
    }

    .image-wrapper img {
      display: block;
      width: 100%;
      height: auto;
    }

    .hotspot {
      position: absolute;
      border-radius: 999px;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.05);
      border: 1px dashed rgba(255, 255, 255, 0.3);
    }
    .hotspot:hover { background: rgba(255, 255, 255, 0.15); }

    .hotspot-info {
      flex: 1 1 200px;
      min-width: 220px;
      padding: 12px 16px;
      border-radius: 12px;
      border: 1px solid #333;
      background: #181818;
      font-size: 14px;
      line-height: 1.5;
    }

    .hotspot-info-title {
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 15px;
    }

    .step-indicator {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #aaa;
      margin-bottom: 8px;
    }
  </style>
</head>
<body>
<div class="app-container">

  <!-- Step 1: 视频 1 -->
  <section id="step1" class="step active">
    <div class="step-indicator">Step 1 / 4</div>
    <h2>Video 1</h2>
    <p>Please watch the video. After it finishes, it will automatically move to the next step.</p>

    <div class="video-wrapper">
      <div id="player1"></div>
    </div>
  </section>

  <!-- Step 2: 选择题 -->
  <section id="step2" class="step">
    <div class="step-indicator">Step 2 / 4</div>
    <h2>Quiz</h2>
    <p>Please answer the question based on the video.</p>

    <h3>Where are the fire extinguishers?</h3>

    <div class="quiz-options">
      <label class="quiz-option">
        <input type="radio" name="quiz" value="A" />
        A. Catering stalls
      </label>
      <label class="quiz-option">
        <input type="radio" name="quiz" value="B" />
        B. Info tent
      </label>
      <label class="quiz-option">
        <input type="radio" name="quiz" value="C" />
        C. Market stalls
      </label>
    </div>

    <button class="btn" id="checkAnswerBtn">Check Answer</button>
    <button class="btn" id="quizNextBtn" disabled>Next ▶</button>

    <div class="message" id="quizMessage"></div>
  </section>

  <!-- Step 3: 视频 2 -->
  <section id="step3" class="step">
    <div class="step-indicator">Step 3 / 4</div>
    <h2>Video 2</h2>
    <p>Please watch the second video. After it finishes, it will move to the final step.</p>

    <div class="video-wrapper">
      <div id="player2"></div>
    </div>
  </section>

  <!-- Step 4: 热点交互 -->
  <section id="step4" class="step">
    <div class="step-indicator">Step 4 / 4</div>
    <h2>Interactive Image</h2>
    <p>Click on items in the image to learn more.</p>

    <div class="image-hotspot-container">
      <div class="image-wrapper">
        <!-- TODO：把图片换成你的 -->
        <img src="your-image.jpg" alt="Scene" />

        <!-- 示例热点：水瓶 -->
        <div class="hotspot"
             data-title="Water Bottle"
             data-description="A water bottle is essential for hydration during outdoor activities."
             style="top: 60%; left: 55%; width: 12%; height: 20%;">
        </div>

        <!-- 示例热点：Notebook -->
        <div class="hotspot"
             data-title="Notebook"
             data-description="Used to record important information and notes."
             style="top: 40%; left: 25%; width: 18%; height: 20%;">
        </div>

      </div>

      <div class="hotspot-info" id="hotspotInfo">
        <div class="hotspot-info-title">Hint</div>
        <div>Click the highlighted areas in the image to view explanations.</div>
      </div>
    </div>
  </section>

</div>

<!-- YouTube API -->
<script src="https://www.youtube.com/iframe_api"></script>

<script>
  let player1, player2;

  const VIDEO_1_ID = "_ui398aLpIA";    // 你的第一个 shorts
  const VIDEO_2_ID = "TAoYnAJLXoQ";    // 第二个 shorts

  const CORRECT_ANSWER = "A";

  function showStep(step) {
    document.querySelectorAll(".step").forEach((el, i) => {
      el.classList.toggle("active", i === step - 1);
    });
  }

  function onYouTubeIframeAPIReady() {
    player1 = new YT.Player("player1", {
      videoId: VIDEO_1_ID,
      playerVars: { autoplay: 1, controls: 1, rel: 0 },
      events: { onStateChange: onPlayer1Done }
    });

    player2 = new YT.Player("player2", {
      videoId: VIDEO_2_ID,
      playerVars: { autoplay: 0, controls: 1, rel: 0 },
      events: { onStateChange: onPlayer2Done }
    });
  }

  function onPlayer1Done(event) {
    if (event.data === YT.PlayerState.ENDED) {
      showStep(2);
    }
  }

  function onPlayer2Done(event) {
    if (event.data === YT.PlayerState.ENDED) {
      showStep(4);
    }
  }

  // Quiz logic
  const msg = document.getElementById("quizMessage");
  const nextBtn = document.getElementById("quizNextBtn");

  document.getElementById("checkAnswerBtn").addEventListener("click", () => {
    const selected = document.querySelector('input[name="quiz"]:checked');

    if (!selected) {
      msg.textContent = "Please select an option.";
      msg.className = "message wrong";
      return;
    }

    if (selected.value === CORRECT_ANSWER) {
      msg.textContent = "Correct! Click Next to continue.";
      msg.className = "message correct";
      nextBtn.disabled = false;
    } else {
      msg.textContent = "Wrong answer. Try again!";
      msg.className = "message wrong";
      nextBtn.disabled = true;
    }
  });

  nextBtn.addEventListener("click", () => {
    showStep(3);
    player2.playVideo();
  });

  // Hotspots
  document.addEventListener("click", (event) => {
    const hotspot = event.target.closest(".hotspot");
    if (!hotspot) return;

    const title = hotspot.dataset.title;
    const desc = hotspot.dataset.description;

    document.getElementById("hotspotInfo").innerHTML = `
      <div class="hotspot-info-title">${title}</div>
      <div>${desc}</div>
    `;
  });
</script>

</body>
</html>
